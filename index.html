<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Encrypted Transmission</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  /*background: #1e1e1e;*/
  background: #000;
  font-family: "Courier New", monospace;
  height: 100%;
  overflow: hidden;
}

/* ===== Editor Container ===== */
#editor {
  padding: 60px;
  font-size: 20px;
  line-height: 1.8;
  color: #d4d4d4;
  position: relative;
}

/* ===== Cursor ===== */
.cursor {
  display: inline-block;
  width: 10px;
  background: #d4d4d4;
  margin-left: 3px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}

/* ===== VS Code Dark+ Theme ===== */
.token-keyword   { color: #569CD6; }
.token-string    { color: #CE9178; }
.token-function  { color: #DCDCAA; }
.token-number    { color: #B5CEA8; }
.token-operator  { color: #d4d4d4; }
.token-brace     { color: #FFD700; }
.token-dot       { color: #9CDCFE; }
.token-semicolon { color: #d4d4d4; }
.token-comma     { color: #d4d4d4; }
.token-property  { color: #9CDCFE; }
.token-comment   { color: #6A9955; }
.token-small-brace {color: #8657d6; }

/* ===== IntelliSense Popup ===== */
#suggestions {
  position: absolute;
  background: #252526;
  border: 1px solid #3c3c3c;
  padding: 6px 0;
  font-size: 14px;
  color: #d4d4d4;
  width: 220px;
  display: none;
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  border-radius: 4px;
}

.suggestion-item {
  padding: 6px 12px;
}

.suggestion-item:hover {
  background: #094771;
}
</style>
</head>

<body>

<div id="editor"></div>

<div id="suggestions">
  <div class="suggestion-item">entity(name: string)</div>
  <div class="suggestion-item">inject(identity: string)</div>
  <div class="suggestion-item">signal(target: string)</div>
  <div class="suggestion-item">connect(number: string)</div>
  <div class="suggestion-item">mail(address: string)</div>
</div>

<script>

const editor = document.getElementById("editor");
const suggestions = document.getElementById("suggestions");

/* Code lines with full syntax highlighting */
const lines = [
  `<span class="token-keyword">try</span> <span class="token-brace">{</span>`,

  `   <span class="token-property">system</span><span class="token-dot">.</span><span class="token-property">visibility</span> <span class="token-operator">=</span> <span class="token-keyword">false</span><span class="token-semicolon">;</span>`,

  `   <span class="token-property">render</span><span class="token-dot">.</span><span class="token-function">entity</span><span class="token-small-brace">(</span><span class="token-string">"Cipher"</span><span class="token-small-brace">)</span><span class="token-semicolon">;</span>`,

  `   <span class="token-property">identity</span><span class="token-dot">.</span><span class="token-function">inject</span><span class="token-small-brace">(</span><span class="token-string">"The Invisible Man"</span><span class="token-small-brace">)</span><span class="token-semicolon">;</span>`,

  ``,

  `   <span class="token-property">network</span><span class="token-dot">.</span><span class="token-function">signal</span><span class="token-small-brace">(</span><span class="token-string">"The Last Vision"</span><span class="token-small-brace">)</span><span class="token-semicolon">;</span>`,

  ``,

  `   <span class="token-property">contact</span><span class="token-dot">.</span><span class="token-function">connect</span><span class="token-small-brace">(</span><span class="token-string">"561.305.9696"</span><span class="token-small-brace">)</span><span class="token-semicolon">;</span>`,

  `   <span class="token-property">contact</span><span class="token-dot">.</span><span class="token-function">mail</span><span class="token-small-brace">(</span><span class="token-string">"thelastvision@live.com"</span><span class="token-small-brace">)</span><span class="token-semicolon">;</span>`,

  `<span class="token-brace">}</span>`
];

/* Suggestion popup */
function showSuggestions(x, y) {
  suggestions.style.left = x + "px";
  suggestions.style.top = y + "px";
  suggestions.style.display = "block";

  setTimeout(() => {
    suggestions.style.display = "none";
  }, 1200);
}

/* Typing animation */
function typeLines() {
  let lineIndex = 0;

  function typeLine() {
    if (lineIndex >= lines.length) return;

    const div = document.createElement("div");
    editor.appendChild(div);

    const cursor = document.createElement("span");
    cursor.className = "cursor";
    div.appendChild(cursor);

    const html = lines[lineIndex];
    let i = 0;

    const typing = setInterval(() => {

      div.innerHTML = html.slice(0, i) + `<span class="cursor"></span>`;
      i++;

      // Trigger suggestions when typing a dot
      if (html[i] === ".") {
        const rect = div.getBoundingClientRect();
        showSuggestions(rect.left + 220, rect.top + 25);
      }

      if (i >= html.length) {
        clearInterval(typing);
        lineIndex++;
        setTimeout(typeLine, 400);
      }

    }, 15);
  }

  typeLine();
}

typeLines();

</script>

</body>
</html>
