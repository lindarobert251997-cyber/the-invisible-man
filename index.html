<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Encrypted Transmission</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #1e1e1e;
  font-family: "Courier New", monospace;
  height: 100%;
  overflow: hidden;
}

/* ===== Editor ===== */
#editor {
  padding: 60px;
  font-size: 18px;
  line-height: 1.8;
  color: #d4d4d4;
  position: relative;
  white-space: pre;
}

/* Cursor */
.cursor {
  display: inline-block;
  width: 10px;
  background: #d4d4d4;
  margin-left: 2px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%,50%,100% { opacity: 1; }
  25%,75% { opacity: 0; }
}

/* ===== VS Code Dark+ Colors ===== */
.token-keyword   { color: #569CD6; }
.token-string    { color: #CE9178; }
.token-function  { color: #DCDCAA; }
.token-number    { color: #B5CEA8; }
.token-operator  { color: #d4d4d4; }
.token-brace     { color: #FFD700; }
.token-dot       { color: #9CDCFE; }
.token-semicolon { color: #d4d4d4; }
.token-property  { color: #9CDCFE; }
.token-comment   { color: #6A9955; }

/* IntelliSense */
#suggestions {
  position: absolute;
  background: #252526;
  border: 1px solid #3c3c3c;
  padding: 6px 0;
  font-size: 14px;
  color: #d4d4d4;
  width: 220px;
  display: none;
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  border-radius: 4px;
}

.suggestion-item {
  padding: 6px 12px;
}
.suggestion-item:hover {
  background: #094771;
}
</style>
</head>

<body>

<div id="editor"></div>

<div id="suggestions">
  <div class="suggestion-item">connect(target: string)</div>
  <div class="suggestion-item">inject(identity: string)</div>
  <div class="suggestion-item">transmit(signal: string)</div>
  <div class="suggestion-item">encrypt(payload: object)</div>
</div>

<script>

const editor = document.getElementById("editor");
const suggestions = document.getElementById("suggestions");

/* ===== Structured Code Blocks ===== */
const code = [

`<span class="token-keyword">class</span> <span class="token-function">Transmission</span> <span class="token-brace">{</span>`,

`    <span class="token-keyword">public</span> <span class="token-keyword">static</span> <span class="token-keyword">void</span> <span class="token-function">main</span><span class="token-brace">(</span><span class="token-string">String[] args</span><span class="token-brace">)</span> <span class="token-brace">{</span>`,

`        <span class="token-property">System</span><span class="token-dot">.</span><span class="token-function">out</span><span class="token-dot">.</span><span class="token-function">println</span><span class="token-brace">(</span><span class="token-string">"Initializing secure channel..."</span><span class="token-brace">)</span><span class="token-semicolon">;</span>`,

`        <span class="token-keyword">if</span> <span class="token-brace">(</span><span class="token-property">visibility</span> <span class="token-operator">==</span> <span class="token-keyword">false</span><span class="token-brace">)</span> <span class="token-brace">{</span>`,

`            <span class="token-property">identity</span><span class="token-dot">.</span><span class="token-function">inject</span><span class="token-brace">(</span><span class="token-string">"Cipher"</span><span class="token-brace">)</span><span class="token-semicolon">;</span>`,

`            <span class="token-keyword">for</span> <span class="token-brace">(</span><span class="token-keyword">int</span> i <span class="token-operator">=</span> <span class="token-number">0</span><span class="token-semicolon">;</span> i <span class="token-operator"><</span> <span class="token-number">3</span><span class="token-semicolon">;</span> i<span class="token-operator">++</span><span class="token-brace">)</span> <span class="token-brace">{</span>`,

`                <span class="token-property">network</span><span class="token-dot">.</span><span class="token-function">transmit</span><span class="token-brace">(</span><span class="token-string">"Encrypted Packet"</span><span class="token-brace">)</span><span class="token-semicolon">;</span>`,

`            <span class="token-brace">}</span>`,

`        <span class="token-brace">}</span>`,

`        <span class="token-keyword">while</span> <span class="token-brace">(</span><span class="token-property">connection</span> <span class="token-operator">!=</span> <span class="token-keyword">null</span><span class="token-brace">)</span> <span class="token-brace">{</span>`,

`            <span class="token-property">connection</span><span class="token-dot">.</span><span class="token-function">maintain</span><span class="token-brace">(</span><span class="token-brace">)</span><span class="token-semicolon">;</span>`,

`        <span class="token-brace">}</span>`,

`    <span class="token-brace">}</span>`,

`<span class="token-brace">}</span>`
];


/* ===== Suggestion Popup ===== */
function showSuggestions(x, y) {
  suggestions.style.left = x + "px";
  suggestions.style.top = y + "px";
  suggestions.style.display = "block";

  setTimeout(() => {
    suggestions.style.display = "none";
  }, 1000);
}


/* ===== Typing Engine ===== */
function typeCode() {
  let lineIndex = 0;

  function typeLine() {
    if (lineIndex >= code.length) return;

    const lineDiv = document.createElement("div");
    editor.appendChild(lineDiv);

    const html = code[lineIndex];
    let i = 0;

    const typing = setInterval(() => {

      lineDiv.innerHTML = html.slice(0, i) + `<span class="cursor"></span>`;
      i++;

      if (html[i] === ".") {
        const rect = lineDiv.getBoundingClientRect();
        showSuggestions(rect.left + 260, rect.top + 20);
      }

      if (i >= html.length) {
        clearInterval(typing);
        lineIndex++;
        setTimeout(typeLine, 300);
      }

    }, 12);
  }

  typeLine();
}

typeCode();

</script>

</body>
</html>
